<script>
    function submit() {
        var name = document.getElementById('icurriculums-name').innerHTML;
        var sport = document.getElementById('icurriculums-sport').innerHTML;
        var curriculum = document.getElementById('icurriculums-curriculum').innerHTML;
        if (!sport || sport.indexOf('Физкультура') !== -1) {
            showError('Физкультура отсутствует');
            return;
        }

        if (!curriculum || curriculum.indexOf('Учебный план') !== -1) {
            showError('Учебный отсутствует');
            return;
        }

        if (!name) {
            showError('Имя отстутсвует');
            return;
        }
        
        google.script.run.withSuccessHandler(function(disciplines) {
            var teachers = [];
            for (var i = 0; i < disciplines.length; ++i) {
                var dp = disciplines[i];
                var val = document.getElementById('ic-discipline-' + dp).innerHTML.trim();
                if (val !== disciplines[i]) {
                   teachers.push([dp, val]);
                } else {
                  teachers.push([dp, '']);
                }
            }
            google.script.run.addICurriculum(name, curriculum, sport, teachers);
            hideError();
        }).getDisciplines();
    }

    function selectCurriculum(curriculum) {
        select('icurriculums-curriculum', curriculum);
    }
</script>
